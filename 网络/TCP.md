## TCP介绍

TCP是一种**面向连接**的**可靠**字节流协议

## TCP三次握手

客户端通过http协议与服务器进行传输数据前，要先进行TCP三次握手，每次握手🤝都会发送ack确认以保证成功发送。三次握手的目的如下：

- 第一次握手，是由客户端主动发起，客户端发送SYN*连接请求报文*给服务器，然后进入SYN_SENT状态
- 第二次握手，服务器接收SYN，并将SYN+ACK确认发给客户端，服务器进入SYN_RECEIVED状态
- 第三次握手，客户端发送完*连接确认报文*，进入ESTABLISHED状态；服务器收到连接确认报文后，也进入ESTABLISHED状态。

## 为什么握手要三次，而不是两次/四次

因为确认双方收发能力都正常最少需要三次，四次没必要，两次不够。

第一次握手，说明客户端发送能力正常；
第二次握手，说明服务器收发能力都正常；
第三次握手，说明客户端接收能力正常。

所以两次握手是没法确认客户端的接收能力是否正常的，这很重要。如果不确认客户端的接收能力正常就直接擅自建立连接，就有可能出现服务器接收到失效连接请求报文（一般都是超时抵达的）仍然傻傻进入ESTABLISHED状态，导致服务器端一直无意义等待，从而造成资源浪费的情况。
